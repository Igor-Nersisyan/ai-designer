# –¢–ó –¥–ª—è Replit Agent: AI-–î–∏–∑–∞–π–Ω–µ—Ä –ø–æ —Ä–µ–º–æ–Ω—Ç—É

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Framework**: Streamlit (Python 3.11)
- **LLM**: OpenAI GPT-4o (model="gpt-4o")
- **Image Generation**: DALL-E 3
- **State Management**: st.session_state
- **Dependencies**: 
```
  streamlit==1.32.0
  openai==1.12.0
  pillow==10.2.0
  python-dotenv==1.0.1
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
main.py          # –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
prompts.py       # –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ö
utils.py         # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è base64, API calls)
.env             # OPENAI_API_KEY
requirements.txt
```

## main.py - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### Imports –∏ configuration
```python
import streamlit as st
import base64
from openai import OpenAI
from PIL import Image
import io
from prompts import SYSTEM_PROMPT_ANALYZER, SYSTEM_PROMPT_DALLE_ENGINEER
from utils import encode_image, call_gpt4o_vision, call_gpt4o, generate_image
import os
from dotenv import load_dotenv

load_dotenv()

st.set_page_config(
    page_title="AI-–î–∏–∑–∞–π–Ω–µ—Ä –ø–æ —Ä–µ–º–æ–Ω—Ç—É",
    page_icon="üè†",
    layout="wide"
)

client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
```

### CSS —Å—Ç–∏–ª–∏
```python
st.markdown("""
<style>
.stButton>button {
    width: 100%;
    border-radius: 8px;
    height: 3em;
    font-weight: 600;
}
.main .block-container {
    max-width: 1400px;
    padding: 2rem;
}
h1 {
    color: #1f1f1f;
    margin-bottom: 2rem;
}
.uploaded-image {
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.generated-image {
    border-radius: 12px;
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    margin-bottom: 1rem;
}
</style>
""", unsafe_allow_html=True)
```

### Session State –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```python
if 'analysis' not in st.session_state:
    st.session_state.analysis = None
if 'images' not in st.session_state:
    st.session_state.images = []  # [{'url': str, 'prompt': str, 'iterations': int}]
if 'selected_image_idx' not in st.session_state:
    st.session_state.selected_image_idx = None
if 'uploaded_image_b64' not in st.session_state:
    st.session_state.uploaded_image_b64 = None
if 'room_type' not in st.session_state:
    st.session_state.room_type = None
if 'purpose' not in st.session_state:
    st.session_state.purpose = ""
```

### Header
```python
st.title("üè† AI-–î–∏–∑–∞–π–Ω–µ—Ä –ø–æ —Ä–µ–º–æ–Ω—Ç—É")
st.markdown("–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø–æ–º–µ—â–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç")
```

### Sidebar - –≠—Ç–∞–ø 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
```python
with st.sidebar:
    st.header("üìã –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ")
    
    room_type = st.selectbox(
        "–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è",
        ["–ö–æ–º–Ω–∞—Ç–∞", "–ö—É—Ö–Ω—è", "–í–∞–Ω–Ω–∞—è", "–ì–æ—Å—Ç–∏–Ω–∞—è", "–°–ø–∞–ª—å–Ω—è", "–î–µ—Ç—Å–∫–∞—è", "–ö–∞–±–∏–Ω–µ—Ç", "–ü—Ä–∏—Ö–æ–∂–∞—è"],
        key="room_type_select"
    )
    
    uploaded_file = st.file_uploader(
        "–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø–æ–º–µ—â–µ–Ω–∏—è",
        type=["jpg", "jpeg", "png"],
        help="–ß–µ—Ç–∫–æ–µ, —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ"
    )
    
    if uploaded_file:
        image = Image.open(uploaded_file)
        st.image(image, caption="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ", use_container_width=True)
        st.session_state.uploaded_image_b64 = encode_image(uploaded_file)
    
    purpose = st.text_area(
        "–¶–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–º–µ—â–µ–Ω–∏—è",
        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ö–æ—á—É —É—é—Ç–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–∑ –¥–æ–º–∞ —Å —Ö–æ—Ä–æ—à–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º",
        height=100
    )
    
    analyze_button = st.button("üîç –ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑", type="primary", disabled=not uploaded_file)
    
    st.divider()
    
    if st.button("üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"):
        for key in list(st.session_state.keys()):
            del st.session_state[key]
        st.rerun()
```

### Main Area - –≠—Ç–∞–ø 2: –ê–Ω–∞–ª–∏–∑
```python
if analyze_button and uploaded_file:
    st.session_state.room_type = room_type
    st.session_state.purpose = purpose
    
    with st.spinner("üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø–æ–º–µ—â–µ–Ω–∏–µ..."):
        analysis = call_gpt4o_vision(
            client,
            SYSTEM_PROMPT_ANALYZER,
            f"–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è: {room_type}\n–¶–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: {purpose}",
            st.session_state.uploaded_image_b64
        )
        st.session_state.analysis = analysis

if st.session_state.analysis:
    st.header("üìä –ê–Ω–∞–ª–∏–∑ –≤–∞—à–µ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è")
    st.markdown(st.session_state.analysis)
    
    st.divider()
```

### Main Area - –≠—Ç–∞–ø 3: –°—Ç–∏–ª–µ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```python
    st.header("üé® –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç–∞")
    
    col1, col2 = st.columns([2, 1])
    
    with col1:
        styles = st.multiselect(
            "–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª–∏ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)",
            ["–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∏–π", "–õ–æ—Ñ—Ç", "–ú–∏–Ω–∏–º–∞–ª–∏–∑–º", "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π", "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", "–≠–∫–æ", "–Ø–ø–æ–Ω—Å–∫–∏–π", "–ü—Ä–æ–≤–∞–Ω—Å"],
            default=["–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∏–π"]
        )
    
    with col2:
        main_color = st.color_picker("–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç", "#FFFFFF")
    
    additional_preferences = st.text_input(
        "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–æ–ª—å—à–µ –∑–µ–ª–µ–Ω–∏, –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã"
    )
    
    generate_button = st.button("‚ú® –°–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç", type="primary")
    
    if generate_button:
        if not styles:
            st.error("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å—Ç–∏–ª—å")
        else:
            with st.spinner("üé® –°–æ–∑–¥–∞—é –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç..."):
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è DALL-E
                dalle_prompt = call_gpt4o(
                    client,
                    SYSTEM_PROMPT_DALLE_ENGINEER,
                    f"""–ê–Ω–∞–ª–∏–∑ –ø–æ–º–µ—â–µ–Ω–∏—è:
{st.session_state.analysis}

–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è: {st.session_state.room_type}
–¶–µ–ª—å: {st.session_state.purpose}
–°—Ç–∏–ª–∏: {', '.join(styles)}
–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç: {main_color}
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: {additional_preferences}

–°–æ–∑–¥–∞–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è DALL-E 3."""
                )
                
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                image_url = generate_image(client, dalle_prompt)
                
                st.session_state.images.append({
                    'url': image_url,
                    'prompt': dalle_prompt,
                    'iterations': 0
                })
                
            st.success("‚úÖ –î–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω!")
            st.rerun()
```

### Main Area - –≠—Ç–∞–ø 4 –∏ 5: –ì–∞–ª–µ—Ä–µ—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞
```python
if st.session_state.images:
    st.divider()
    st.header("üñºÔ∏è –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–∏–∑–∞–π–Ω–∞")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    for idx, img_data in enumerate(st.session_state.images):
        with st.container():
            col1, col2 = st.columns([3, 2])
            
            with col1:
                st.image(img_data['url'], use_container_width=True)
            
            with col2:
                st.markdown(f"**–í–∞—Ä–∏–∞–Ω—Ç {idx + 1}**")
                st.caption(f"–ò—Ç–µ—Ä–∞—Ü–∏–π: {img_data['iterations']}")
                
                with st.expander("üìù –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏"):
                    st.text(img_data['prompt'])
                
                if st.button(f"üîß –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç", key=f"refine_{idx}"):
                    st.session_state.selected_image_idx = idx
                    st.rerun()
            
            st.divider()
    
    # –§–æ—Ä–º–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
    if st.session_state.selected_image_idx is not None:
        idx = st.session_state.selected_image_idx
        current_img = st.session_state.images[idx]
        
        st.subheader(f"üîß –î–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ {idx + 1}")
        
        feedback = st.text_area(
            "–ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å?",
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å–¥–µ–ª–∞—Ç—å —Å—Ç–µ–Ω—ã —Å–≤–µ—Ç–ª–µ–µ, –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞—Å—Ç–µ–Ω–∏–π, –∑–∞–º–µ–Ω–∏—Ç—å –¥–∏–≤–∞–Ω –Ω–∞ —É–≥–ª–æ–≤–æ–π",
            height=100,
            key="feedback_input"
        )
        
        col1, col2 = st.columns([1, 4])
        with col1:
            refine_button = st.button("üé® –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è", type="primary")
        with col2:
            if st.button("‚ùå –û—Ç–º–µ–Ω–∏—Ç—å"):
                st.session_state.selected_image_idx = None
                st.rerun()
        
        if refine_button and feedback:
            with st.spinner("üé® –î–æ—Ä–∞–±–∞—Ç—ã–≤–∞—é –¥–∏–∑–∞–π–Ω..."):
                # –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç
                refined_prompt = call_gpt4o(
                    client,
                    SYSTEM_PROMPT_DALLE_ENGINEER,
                    f"""–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–º–ø—Ç:
{current_img['prompt']}

–§–∏–¥–±—ç–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {feedback}

–°–æ–∑–¥–∞–π –ù–û–í–´–ô –ø—Ä–æ–º–ø—Ç –¥–ª—è DALL-E 3, —É—á–∏—Ç—ã–≤–∞—è —Ñ–∏–¥–±—ç–∫. –û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –ø—Ä–æ–º–ø—Ç–æ–º."""
                )
                
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                new_image_url = generate_image(client, refined_prompt)
                
                # –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫ –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                st.session_state.images.append({
                    'url': new_image_url,
                    'prompt': refined_prompt,
                    'iterations': current_img['iterations'] + 1
                })
                
                st.session_state.selected_image_idx = None
                
            st.success("‚úÖ –ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–æ–∑–¥–∞–Ω!")
            st.rerun()
```

### Main Area - –≠—Ç–∞–ø 6: –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```python
    st.divider()
    st.header("üìã –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏")
    
    if st.button("üìù –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º"):
        with st.spinner("üìù –§–æ—Ä–º–∏—Ä—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏..."):
            recommendations = call_gpt4o(
                client,
                """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–∏–∑–∞–π–Ω—É –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –æ—Ç–¥–µ–ª–∫–∏. 
–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–∞–π –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ:
1. –û—Ç–¥–µ–ª–∫–µ —Å—Ç–µ–Ω (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ü–≤–µ—Ç–∞, —Ç–µ–∫—Å—Ç—É—Ä—ã)
2. –ù–∞–ø–æ–ª—å–Ω–æ–º—É –ø–æ–∫—Ä—ã—Ç–∏—é (—Ç–∏–ø, —Ü–≤–µ—Ç, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏)
3. –ü–æ—Ç–æ–ª–∫—É (–æ—Ç–¥–µ–ª–∫–∞, –æ—Å–≤–µ—â–µ–Ω–∏–µ)
4. –ú–µ–±–µ–ª–∏ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏)
5. –û—Å–≤–µ—â–µ–Ω–∏—é (—Ç–∏–ø—ã —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
6. –î–µ–∫–æ—Ä—É –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞–º

–ë—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º: —É–∫–∞–∑—ã–≤–∞–π –±—Ä–µ–Ω–¥—ã, –∞—Ä—Ç–∏–∫—É–ª—ã, –ø—Ä–∏–º–µ—Ä–Ω—ã–µ —Ü–µ–Ω—ã (–≤ —Ä—É–±–ª—è—Ö).""",
                f"""–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è: {st.session_state.room_type}
–¶–µ–ª—å: {st.session_state.purpose}

–ê–Ω–∞–ª–∏–∑:
{st.session_state.analysis}

–ò—Ç–æ–≥–æ–≤—ã–π –¥–∏–∑–∞–π–Ω (–ø—Ä–æ–º–ø—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞):
{st.session_state.images[-1]['prompt']}

–î–∞–π –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏."""
            )
            
        st.markdown(recommendations)
```

## prompts.py - –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã
```python
SYSTEM_PROMPT_ANALYZER = """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–∏–∑–∞–π–Ω—É –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤ —Å 15-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–æ—Ç–æ –ø–æ–º–µ—â–µ–Ω–∏—è.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:

## üîç –ê–£–î–ò–¢ –ü–û–ú–ï–©–ï–ù–ò–Ø

**–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ –∏ –∑–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
[3-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Ç–µ–∫—É—â–µ–π –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞]

**–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–¥–µ–ª–∫–∏:**
[–û—Ü–µ–Ω–∫–∞ —Å—Ç–µ–Ω, –ø–æ–ª–∞, –ø–æ—Ç–æ–ª–∫–∞, –æ–∫–æ–Ω - —á—Ç–æ –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–º–µ–Ω—ã]

**–û—Å–≤–µ—â–µ–Ω–∏–µ:**
[–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤]

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
[–ö–∞–∫ –ø–æ–º–µ—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–π—á–∞—Å, —É–¥–æ–±—Å—Ç–≤–æ, —ç—Ä–≥–æ–Ω–æ–º–∏–∫–∞]

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´

1. [–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞]
2. [–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞]
3. [–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞]

## ‚ú® –ü–û–¢–ï–ù–¶–ò–ê–õ

1. [–ß—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ]
2. [–°–∫—Ä—ã—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞]
3. [–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ–º–µ—â–µ–Ω–∏—è]

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

**–ó–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
[–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞]

**–û—Å–≤–µ—â–µ–Ω–∏–µ:**
[–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å —Å —Ç–æ—á–∫–∞–º–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è]

**–¶–≤–µ—Ç–æ–≤–∞—è –≥–∞–º–º–∞:**
[–ö–∞–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–æ—á–µ–º—É, —É—á–∏—Ç—ã–≤–∞—è –æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ä]

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
[3-4 —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞]

–ü–∏—à–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –±–µ–∑ –≤–æ–¥—ã. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é."""

SYSTEM_PROMPT_DALLE_ENGINEER = """–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è DALL-E 3 —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ú–ü–¢–ê:

1. **–¢–∏–ø –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** "Photorealistic interior design photograph"
2. **–ü–æ–º–µ—â–µ–Ω–∏–µ –∏ —Å—Ç–∏–ª—å:** [—Ç–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è] + [—Å—Ç–∏–ª—å(–∏)]
3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [–ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞, –≤—ã—Å–æ—Ç–∞ –ø–æ—Ç–æ–ª–∫–æ–≤, –æ–∫–Ω–∞]
4. **–û—Ç–¥–µ–ª–∫–∞:**
   - –°—Ç–µ–Ω—ã: [–º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä–∞]
   - –ü–æ–ª: [–º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–≤–µ—Ç, –ø–∞—Ç—Ç–µ—Ä–Ω]
   - –ü–æ—Ç–æ–ª–æ–∫: [–æ—Ç–¥–µ–ª–∫–∞, –¥–µ—Ç–∞–ª–∏]
5. **–ú–µ–±–µ–ª—å:** [3-5 –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏ —Ü–≤–µ—Ç–∞]
6. **–û—Å–≤–µ—â–µ–Ω–∏–µ:**
   - –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ: [–æ–∫–Ω–∞, –≤—Ä–µ–º—è —Å—É—Ç–æ–∫]
   - –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ: [—Ç–∏–ø—ã —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ]
7. **–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞:** [–æ—Å–Ω–æ–≤–Ω–æ–π + 2-3 –∞–∫—Ü–µ–Ω—Ç–Ω—ã—Ö —Ü–≤–µ—Ç–∞]
8. **–î–µ–∫–æ—Ä –∏ –¥–µ—Ç–∞–ª–∏:** [—Ä–∞—Å—Ç–µ–Ω–∏—è, —Ç–µ–∫—Å—Ç–∏–ª—å, –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã - 3-4 —ç–ª–µ–º–µ–Ω—Ç–∞]
9. **–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞:** [–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Å—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏]
10. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:** "professional architectural photography, high resolution, sharp focus"

–¢–†–ï–ë–û–í–ê–ù–ò–Ø:
- –î–ª–∏–Ω–∞: 150-200 —Å–ª–æ–≤
- –Ø–∑—ã–∫: –¢–û–õ–¨–ö–û –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- –°—Ç–∏–ª—å: –¥–µ—Ç–∞–ª—å–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
- –£–∫–∞–∑—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ü–≤–µ—Ç–∞, —Ç–∏–ø—ã –º–µ–±–µ–ª–∏
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–ø–∏—à–∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ

–ü–†–ò–ú–ï–† –ö–ê–ß–ï–°–¢–í–ï–ù–ù–û–ì–û –ü–†–û–ú–ü–¢–ê:
"Photorealistic interior design photograph of a Scandinavian minimalist living room, 35 square meters with 3-meter high white ceilings. Large panoramic window with sheer linen curtains in warm beige, natural daylight creating soft shadows. Light oak engineered wooden flooring with matte finish. Walls painted in warm white (ivory undertone) with smooth texture. Modern low-profile sofa in light gray boucle fabric with wooden legs, positioned against the main wall. Round walnut coffee table with brass legs, 90cm diameter. Black metal floor lamp with adjustable arm. Floating oak shelving unit displaying ceramic vases and books. Two large fiddle leaf fig plants in white ceramic planters. Handwoven jute area rug in natural beige. Soft ambient lighting from hidden LED strips along the ceiling perimeter, creating warm 2700K glow. Cozy and serene atmosphere, professional interior photography, shot with wide-angle lens, natural color grading, high resolution, sharp details."

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¢–û–ß–ù–û –ø–æ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –ø—Ä–æ–º–ø—Ç–æ–º –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π."""
```

## utils.py - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```python
import base64
from openai import OpenAI

def encode_image(uploaded_file):
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ base64"""
    return base64.b64encode(uploaded_file.getvalue()).decode('utf-8')

def call_gpt4o_vision(client: OpenAI, system_prompt: str, user_text: str, image_base64: str) -> str:
    """–í—ã–∑–æ–≤ GPT-4o Vision –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    try:
        response = client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {"role": "system", "content": system_prompt},
                {
                    "role": "user",
                    "content": [
                        {"type": "text", "text": user_text},
                        {
                            "type": "image_url",
                            "image_url": {
                                "url": f"data:image/jpeg;base64,{image_base64}"
                            }
                        }
                    ]
                }
            ],
            max_tokens=2000,
            temperature=0.7
        )
        return response.choices[0].message.content
    except Exception as e:
        raise Exception(f"–û—à–∏–±–∫–∞ GPT-4o Vision: {str(e)}")

def call_gpt4o(client: OpenAI, system_prompt: str, user_prompt: str) -> str:
    """–û–±—ã—á–Ω—ã–π –≤—ã–∑–æ–≤ GPT-4o –¥–ª—è —Ç–µ–∫—Å—Ç–∞"""
    try:
        response = client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": user_prompt}
            ],
            max_tokens=2000,
            temperature=0.7
        )
        return response.choices[0].message.content
    except Exception as e:
        raise Exception(f"–û—à–∏–±–∫–∞ GPT-4o: {str(e)}")

def generate_image(client: OpenAI, prompt: str) -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ DALL-E 3"""
    try:
        response = client.images.generate(
            model="dall-e-3",
            prompt=prompt,
            size="1024x1792",  # –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–æ–º–µ—â–µ–Ω–∏–π
            quality="hd",       # –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π
            n=1
        )
        return response.data[0].url
    except Exception as e:
        raise Exception(f"–û—à–∏–±–∫–∞ DALL-E 3: {str(e)}")
```

## .env
```
OPENAI_API_KEY=your_api_key_here
```

## requirements.txt
```
streamlit==1.32.0
openai==1.12.0
pillow==10.2.0
python-dotenv==1.0.1
```

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –î–õ–Ø REPLIT AGENT:

1. **–ù–ï –î–û–ë–ê–í–õ–Ø–ô** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –Ω–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –¢–ó
2. **–ò–°–ü–û–õ–¨–ó–£–ô –¢–û–ß–ù–û** —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
3. **–°–û–ó–î–ê–ô –ò–ú–ï–ù–ù–û** 4 —Ñ–∞–π–ª–∞: main.py, prompts.py, utils.py, requirements.txt
4. **–í–°–ï –ü–†–û–ú–ü–¢–´** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ prompts.py –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
5. **–í–°–ï API-–≤—ã–∑–æ–≤—ã** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ utils.py
6. **–û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö** —á–µ—Ä–µ–∑ try-except –≤ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ utils.py
7. **Session state** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ main.py
8. **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π** –Ω–∏–∫–∞–∫–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö
9. **.env —Ñ–∞–π–ª** –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¢–û–õ–¨–ö–û OPENAI_API_KEY
10. **–í—Å–µ –∫–Ω–æ–ø–∫–∏** –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å unique keys —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä key=

## –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
streamlit run main.py
```